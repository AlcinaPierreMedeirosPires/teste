<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <title>Jogo</title>
    <style>
        canvas {
            border: 1px solid #d3d3d3;
            background-color: #A0A0A0;
        }
    </style>
</head>
<body onload="startGame();">

<canvas id="gameCanvas" width="480" height="270"></canvas>
<div style="text-align: center;">
    <button onclick="movePlayer1('up')">Cima (W)</button>
    <button onclick="movePlayer1('down')">Baixo (S)</button>
    <button onclick="movePlayer1('left')">Esquerda (A)</button>
    <button onclick="movePlayer1('right')">Direita (D)</button>
    <br><br>
    <button onclick="movePlayer2('up')">Cima (Seta Cima)</button>
    <button onclick="movePlayer2('down')">Baixo (Seta Baixo)</button>
    <button onclick="movePlayer2('left')">Esquerda (Seta Esquerda)</button>
    <button onclick="movePlayer2('right')">Direita (Seta Direita)</button>
</div>

<script>
    var canvas = document.getElementById('gameCanvas');
    var ctx = canvas.getContext('2d');

    var player1 = new Component(30, 30, "red", 10, 120);
    var player2 = new Component(30, 30, "blue", 420, 120);
    var gameInterval;
    
    var keys = {};

    function startGame() {
        gameInterval = setInterval(updateGameArea, 20);
        window.addEventListener('keydown', function(e) {
            keys[e.key] = true;
        });
        window.addEventListener('keyup', function(e) {
            keys[e.key] = false;
        });
    }

    function stopGame() {
        clearInterval(gameInterval);
        alert("COLIS√ÉO DETECTADA");
    }

    function movePlayers() {
        // Movimenta player1
        if (keys['w']) player1.y -= 1;
        if (keys['s']) player1.y += 1;
        if (keys['a']) player1.x -= 1;
        if (keys['d']) player1.x += 1;

        // Movimenta player2
        if (keys['ArrowUp']) player2.y -= 1;
        if (keys['ArrowDown']) player2.y += 1;
        if (keys['ArrowLeft']) player2.x -= 1;
        if (keys['ArrowRight']) player2.x += 1;
    }

    function checkCollision() {
        if (player1.crashWith(player2)) {
            stopGame();
        }
    }

    function updateGameArea() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        movePlayers();
        checkCollision();
        player1.update();
        player2.update();
    }

    function Component(width, height, color, x, y) {
        this.width = width;
        this.height = height;
        this.color = color;
        this.x = x;
        this.y = y;

        this.update = function() {
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }

        this.crashWith = function(other) {
            return !(
                this.y + this.height < other.y || 
                this.y > other.y + other.height || 
                this.x + this.width < other.x || 
                this.x > other.x + other.width
            );
        }
    }
</script>
</body>
</html>
